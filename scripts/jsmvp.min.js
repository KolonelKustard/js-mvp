var WeatherModel=function(){this.getWeather=function(b,a,c){$.ajax({type:"GET",url:"http://api.openweathermap.org/data/2.5/weather",data:{q:b},dataType:"jsonp",success:function(d){a(d)},error:function(f,d,e){if(window.console&&console.log){console.log(f,d,e)}c(f,d,e)}})}};var WeatherView=function(){var a=null;this.setPresenter=function(b){a=b};this.start=function(){$("#weatherForm").submit(function(){a.updateWeather();return false})};this.getLocation=function(){return $("#location").val()};this.setWeatherReport=function(b){$("#weather").text(b)}};var WeatherPresenter=function(a,d){var b=this;var e=function(){if(d!=null){d.setPresenter(b);d.start()}};var c=function(f){if(f.weather.length>0){d.setWeatherReport(f.weather[0].main)}else{d.setWeatherReport("")}};this.updateWeather=function(){var f=d.getLocation();if(f==null||f==""){d.setWeatherReport("");return}a.getWeather(f,c,function(i,g,h){d.setWeatherReport("")})};e()};